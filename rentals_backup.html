<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Inventory | Pastia's Party Rental</title>
    <link rel="stylesheet" href="../styles.css" />
    <link rel="stylesheet" href="../css/inventory.css" />
</head>

<body data-page="inventory">
    <div class="app-shell">

        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="brand">
                <div class="brand-icon">üéâ</div>
                <div>
                    <p class="brand-name">Pastia‚Äôs Party Rental</p>
                    <p class="brand-subtitle">Management System</p>
                </div>
            </div>

            <nav class="nav">
                <a class="nav-item" href="dashboard.html">üìä Dashboard</a>
                <a class="nav-item active" href="inventory.html">üì¶ Inventory</a>
                <a class="nav-item" href="rentals.html">üìù Rental Transactions</a>
                <a class="nav-item" href="reservations.html">üìÖ Reservations</a>
                <a class="nav-item" href="reports.html">üìë Reports</a>
                <a class="nav-item" href="users.html">üë• Users</a>
                <a class="nav-item" href="archive.html">üóÑÔ∏è Archive</a>
            </nav>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="content">
            <header class="page-header">
                <h1>Inventory</h1>

                <div class="page-right">
                    <span id="welcomeUser">Welcome, User</span>
                    <button id="logoutButton" class="logout-btn">Logout</button>
                </div>
            </header>

            <!-- Controls: Search / Filters / Add -->
            <div class="controls-row">
                <div class="control-left">
                    <input id="searchInventory" class="input-search" placeholder="Search by name or notes" />
                    <select id="filterCategory">
                        <option value="all">All</option>
                    </select>
                </div>
                <div class="control-right">
                    <button class="primary-button admin-only" id="addItemBtn">+ Add Item</button>
                </div>
            </div>

            <!-- TABLE -->
            <section class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th>Category</th>
                            <th>Total Qty</th>
                            <th>Available</th>
                            <th>Good</th>
                            <th>Damaged</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>

                    <tbody id="inventoryTableBody"></tbody>
                </table>

                <p class="empty-hint" id="inventoryEmptyHint">No items to display.</p>
            </section>
        </main>
    </div>

    <!-- MODAL -->
    <div id="addItemModal" class="modal hidden" aria-hidden="true">
        <div class="modal-overlay" id="addItemOverlay"></div>
        <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="addItemTitle">
            <h2 id="addItemTitle">Add Inventory Item</h2>

            <div class="form-group">
                <label for="itemName">Name</label>
                <input type="text" id="itemName" name="name" />
            </div>

            <div class="form-group">
                <label for="itemCategory">Category</label>
                <div style="display: flex; gap: 8px;">
                    <select id="itemCategory" name="category" style="flex: 1;">
                        <option value="">-- Select Category --</option>
                    </select>
                    <button type="button" id="addCategoryBtn"
                        style="padding: 10px 12px; border: 1px solid #ccc; border-radius: 8px; background: #f3f4f6; cursor: pointer; font-size: 14px;">+
                        New</button>
                </div>
            </div>

            <div class="form-group">
                <label for="itemTotal">Total Quantity</label>
                <input type="number" id="itemTotal" name="total" min="0" />
            </div>

            <div class="form-group">
                <label for="itemGood">Good Condition</label>
                <input type="number" id="itemGood" name="good" min="0" />
            </div>

            <div class="form-group">
                <label for="itemDamaged">Damaged</label>
                <input type="number" id="itemDamaged" name="damaged" min="0" />
            </div>

            <p id="quantityError" class="input-error"
                style="color: #d9534f; display: none; margin-top: 4px; font-size: 13px;"></p>
            <div class="form-group">
                <label for="itemStatus">Status</label>
                <select id="itemStatus" name="status">
                    <option value="available">Available</option>
                    <option value="low_stock">Low Stock</option>
                    <option value="out_of_stock">Out of Stock</option>
                </select>
            </div>

            <div class="modal-buttons">
                <button id="saveItemBtn" class="btn-primary">Save</button>
                <button id="cancelModalBtn" class="btn-cancel">Cancel</button>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script type="module" src="../js/supabase.js"></script>
    <script type="module" src="../js/auth.js"></script>
    <script type="module" src="../js/navigation.js"></script>
    <script type="module" src="../js/inventory.js"></script>

</body>

</html>